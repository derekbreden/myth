<script window>
document.addEventListener( "DOMContentLoaded", () => {

  // Preserve style
  let s = Array.prototype.slice.call(document.getElementsByTagName('style'))
    .map((i)=>i.innerHTML).join('\n')

  m.mount(document, {
    controller(){},
    view(ctrl){
      return m('html',{

        // Use m.route for href clicks by default
        onclick(e){
          let $t = e.target
          for(let i in $t.attributes){
            if($t.attributes[i].name === 'href'){
              m.route(e)
            }
          }
        }

      },[
        m('head',m('style',s)),

        // User controlled view
        m.nest('select_view'),

        // The console
        m.nest('console')

      ])
    }
  })
})
</script>